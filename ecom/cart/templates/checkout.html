{% extends "base.html" %}
{% block content %}

<!-- Header-->
<header class="bg-dark py-5">
    <div class="container px-4 px-lg-5 my-5">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bolder">
                <span style="color: #FFFFFF;">Check</span><span style="color: #C5A059;">out</span>
            </h1>
            <p class="lead fw-normal text-white-50 mb-0">Complete your order</p>
        </div>
    </div>
</header>

<!-- Checkout Section-->
<section class="py-5">
    <div class="container px-4 px-lg-5">
        <form method="POST" action="{% url 'checkout' %}">
            {% csrf_token %}
            <div class="row">
                <!-- Shipping Information -->
                <div class="col-lg-7">
                    <div class="card border-0 shadow-sm rounded-4 mb-4">
                        <div class="card-header py-3" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);">
                            <h5 class="mb-0 text-white"><i class="bi bi-geo-alt me-2"></i>Shipping Information</h5>
                        </div>
                        <div class="card-body p-4">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="full_name" class="form-label fw-semibold">Full Name *</label>
                                    <input type="text" class="form-control form-control-lg" id="full_name" name="full_name" 
                                           placeholder="John Doe" required 
                                           value="{% if user.is_authenticated %}{{ user.first_name }} {{ user.last_name }}{% endif %}">
                                </div>
                                <div class="col-md-6">
                                    <label for="email" class="form-label fw-semibold">Email Address *</label>
                                    <input type="email" class="form-control form-control-lg" id="email" name="email" 
                                           placeholder="john@example.com" required
                                           value="{% if user.is_authenticated %}{{ user.email }}{% endif %}">
                                </div>
                                <div class="col-md-6">
                                    <label for="phone" class="form-label fw-semibold">Phone Number *</label>
                                    <input type="tel" class="form-control form-control-lg" id="phone" name="phone" 
                                           placeholder="+1 (555) 123-4567" required>
                                </div>
                                <div class="col-12">
                                    <label for="address_line1" class="form-label fw-semibold">Address Line 1 *</label>
                                    <input type="text" class="form-control form-control-lg" id="address_line1" name="address_line1" 
                                           placeholder="123 Main Street" required>
                                </div>
                                <div class="col-12">
                                    <label for="address_line2" class="form-label fw-semibold">Address Line 2</label>
                                    <input type="text" class="form-control form-control-lg" id="address_line2" name="address_line2" 
                                           placeholder="Apt, Suite, Building (optional)">
                                </div>
                                <div class="col-md-6">
                                    <label for="city" class="form-label fw-semibold">City *</label>
                                    <input type="text" class="form-control form-control-lg" id="city" name="city" 
                                           placeholder="New York" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="state" class="form-label fw-semibold">State/Province *</label>
                                    <input type="text" class="form-control form-control-lg" id="state" name="state" 
                                           placeholder="NY" required>
                                </div>
                                <div class="col-md-2">
                                    <label for="postal_code" class="form-label fw-semibold">Zip Code *</label>
                                    <input type="text" class="form-control form-control-lg" id="postal_code" name="postal_code" 
                                           placeholder="10001" required>
                                </div>
                                <div class="col-12">
                                    <label for="country" class="form-label fw-semibold">Country *</label>
                                    <select class="form-select form-select-lg" id="country" name="country" required>
                                        <option value="United States" selected>United States</option>
                                        <option value="Canada">Canada</option>
                                        <option value="United Kingdom">United Kingdom</option>
                                        <option value="Australia">Australia</option>
                                        <option value="Germany">Germany</option>
                                        <option value="France">France</option>
                                        <option value="India">India</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="card border-0 shadow-sm rounded-4 mb-4">
                        <div class="card-header py-3" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);">
                            <h5 class="mb-0 text-white"><i class="bi bi-credit-card me-2"></i>Payment Method</h5>
                        </div>
                        <div class="card-body p-4">
                            <div class="form-check mb-3 p-3 border rounded-3">
                                <input class="form-check-input" type="radio" name="payment_method" id="cod" value="cod" checked>
                                <label class="form-check-label d-flex align-items-center" for="cod">
                                    <i class="bi bi-cash-stack fs-4 me-3" style="color: #C5A059;"></i>
                                    <div>
                                        <strong>Cash on Delivery</strong>
                                        <p class="text-muted small mb-0">Pay when you receive your order</p>
                                    </div>
                                </label>
                            </div>
                            <div class="form-check mb-3 p-3 border rounded-3 opacity-50">
                                <input class="form-check-input" type="radio" name="payment_method" id="card" value="card" disabled>
                                <label class="form-check-label d-flex align-items-center" for="card">
                                    <i class="bi bi-credit-card-2-front fs-4 me-3" style="color: #C5A059;"></i>
                                    <div>
                                        <strong>Credit/Debit Card</strong>
                                        <p class="text-muted small mb-0">Coming soon</p>
                                    </div>
                                </label>
                            </div>
                            <div class="form-check p-3 border rounded-3 opacity-50">
                                <input class="form-check-input" type="radio" name="payment_method" id="paypal" value="paypal" disabled>
                                <label class="form-check-label d-flex align-items-center" for="paypal">
                                    <i class="bi bi-paypal fs-4 me-3" style="color: #C5A059;"></i>
                                    <div>
                                        <strong>PayPal</strong>
                                        <p class="text-muted small mb-0">Coming soon</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Order Notes -->
                    <div class="card border-0 shadow-sm rounded-4 mb-4">
                        <div class="card-header py-3" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);">
                            <h5 class="mb-0 text-white"><i class="bi bi-pencil me-2"></i>Order Notes (Optional)</h5>
                        </div>
                        <div class="card-body p-4">
                            <textarea class="form-control" id="notes" name="notes" rows="3" 
                                      placeholder="Any special instructions for your order..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="col-lg-5">
                    <div class="card border-0 shadow-sm rounded-4 sticky-top" style="top: 100px;">
                        <div class="card-header py-3" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);">
                            <h5 class="mb-0 text-white"><i class="bi bi-bag me-2"></i>Order Summary</h5>
                        </div>
                        <div class="card-body p-4">
                            <!-- Cart Items -->
                            <div class="mb-4" style="max-height: 300px; overflow-y: auto;">
                                {% for key, item in cart_items.items %}
                                <div class="d-flex align-items-center mb-3 pb-3 border-bottom">
                                    <img src="{{ item.image }}" class="rounded-3 me-3" alt="{{ item.name }}" 
                                         style="width: 60px; height: 60px; object-fit: cover;">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-0 fw-semibold">{{ item.name }}</h6>
                                        <small class="text-muted">Qty: {{ item.quantity }}</small>
                                    </div>
                                    <span class="fw-bold" style="color: #C5A059;">${{ item.price }}</span>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- Totals -->
                            <div class="border-top pt-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">Subtotal:</span>
                                    <span class="fw-semibold">${{ subtotal|floatformat:2 }}</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">Tax (10%):</span>
                                    <span class="fw-semibold">${{ tax|floatformat:2 }}</span>
                                </div>
                                <div class="d-flex justify-content-between mb-3">
                                    <span class="text-muted">Shipping:</span>
                                    <span class="fw-semibold">${{ shipping|floatformat:2 }}</span>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between mb-4">
                                    <span class="fw-bold fs-5">Total:</span>
                                    <span class="fw-bold fs-5" style="color: #C5A059;">${{ total|floatformat:2 }}</span>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="d-grid">
                                <button type="submit" class="btn btn-lg py-3" 
                                        style="background: linear-gradient(135deg, #C5A059 0%, #A88A45 100%); color: white; border: none;">
                                    <i class="bi bi-check-circle me-2"></i>Place Order
                                </button>
                            </div>

                            <!-- Trust Badges -->
                            <div class="text-center mt-4 pt-3 border-top">
                                <div class="d-flex justify-content-center gap-3 text-muted">
                                    <i class="bi bi-shield-check fs-4" title="Secure Payment"></i>
                                    <i class="bi bi-truck fs-4" title="Fast Delivery"></i>
                                    <i class="bi bi-arrow-repeat fs-4" title="Easy Returns"></i>
                                </div>
                                <small class="text-muted d-block mt-2">Secure checkout guaranteed</small>
                            </div>

                            <!-- Back to Cart -->
                            <div class="text-center mt-3">
                                <a href="{% url 'cart_summary' %}" class="text-decoration-none" style="color: #C5A059;">
                                    <i class="bi bi-arrow-left me-1"></i>Back to Cart
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>

{% endblock %}
